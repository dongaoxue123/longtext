<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>体况评分标准</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="../../statics/plugins/layui/css/layui.css" media="all">

</head>
<script src="../../statics/plugins/layui/layui.js"></script>
<script src="../../js/common.js" type="text/javascript" charset="utf-8"></script>

<body>
  <table id="pigScore" lay-filter="pigScore"></table>
  <!-- 国际化        -->
  <script src="../../statics/plugins/i18n/i18next.min.js"></script>
  <script src="../../statics/plugins/i18n/i18nextXHRBackend.min.js"></script>
  <script src='../../statics/plugins/i18n/loc-i18next.min.js'></script>
  <script>
    var authToken = localStorage.getItem("authToken");
    var user = localStorage.getItem("user");
    var farmId = GetQueryString("farmId"); //userId为空表示新增，否则是修改
    var groupId = GetQueryString("groupId"); //userId为空表示新增，否则是修改

    i18n('../../locales', onLangReady) //国际化
    function onLangReady() {
      if (!checkToken()) {
        alert(i18next.t("timeout"));
        window.top.location.href = '../../login.html';
      }

      layui.use(['form', 'table'], function () {
        var table = layui.table;
        var form = layui.form;
        var laydate = layui.laydate;
        var $ = layui.$;
        //方法级渲染
        table.render({
          elem: '#pigScore',
          url: commonIP + "api/pig/score/getPigScoreListPage?authToken=" + authToken + "&farmId=" + farmId +
            "&groupId=" + groupId //数据请求路径
            ,
          parseData: function (res) { //res 即为原始返回的数据
            return {
              "code": res.code, //解析接口状态
              "msg": res.msg, //解析提示文本
              "count": res.count, //解析数据长度
              "data": res.errcode === '200' ? res.dataSource.list : [] //解析数据列表
            };
          },
          cellMinWidth: 80,
          cols: [
            [{
              type: 'numbers',
              width: '10%'
            }, {
              field: 'minBackFat',
              title: i18next.t("pigScore.minBackfat") + '(mm)',
              width: '25%'
            }, {
              field: 'maxBackFat',
              title: i18next.t("pigScore.maxBackfat") + '(mm)',
              width: '25%'
            }, {
              field: 'score',
              title: i18next.t("pigScore.bodyScore"),
              width: '40%',
              sort: true
            }]
          ],
          even: false //开启隔行背景
            //		    ,size: 'sm'
            //		    ,width: '90%'
            //      ,skin: 'row'
            ,
          page: false //开启分页
            ,
          limit: 10 //默认十条数据一页
            ,
          limits: [10, 20, 30, 50] //数据分页条
            ,
          id: 'testReload',
          done: function () {
            i18n('../../locales') //国际化
          }
        });

      });


      function GetQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]);
        return null;
      }

    }
  </script>

</body>

</html>