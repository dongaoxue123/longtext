<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>layui</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="../../statics/plugins/layui/css/layui.css" media="all">
  
</head>
<script src="../../statics/plugins/layui/layui.js"></script>
<script src="../../js/common.js" type="text/javascript" charset="utf-8"></script>
<body> 
    <div class="layui-form-item" id="button" style="margin-top: 10px;">
    	<div class="layui-form-item" style="padding-right: 20px">
		    <label class="layui-form-label" data-i18n="[prepend]deviceExport.appName">:</label>
		    <div class="layui-input-inline">
		      <select id="type" name="type" style="height: 38px;border-color: #F0F0F0;">
		        	<option value="0" data-i18n="deviceExport.mzcz"></option>
		        	<option value="1" data-i18n="deviceExport.zzpd"></option>
		        	<option value="2" data-i18n="deviceExport.szjk"></option>
		        	<option value="3" data-i18n="deviceExport.azkt"></option>
		    	</select>
		    </div>
    	<button class="layui-btn" id="search"  data-i18n="btnSearch"></button>

    </div>
    </div>
<table class="layui-hide" id="exportInfo" lay-filter="exportInfo"></table>
<script type="text/html" id="barDemo">
  <!--<a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>
  <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
	<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>-->
</script>

<!-- 国际化        -->
	<script src="../../statics/plugins/i18n/i18next.min.js"></script>
	<script src="../../statics/plugins/i18n/i18nextXHRBackend.min.js"></script>
	<script src='../../statics/plugins/i18n/loc-i18next.min.js'></script>
<script>
	var authToken=localStorage.getItem("authToken");
	//alert(authToken);
	var user =localStorage.getItem("user");
  var farmId;
  farmId = JSON.parse(user).farmId; 
  
  	i18n('../../locales', onLangReady) //国际化
	function onLangReady(){
	if(!checkToken()){
  		alert(i18next.t("timeout"));
 			window.top.location.href = '../../login.html';
	}

	layui.use(['form','table','laydate'], function(){
		var table = layui.table;
		var form = layui.form;
		var laydate = layui.laydate;
		var $ = layui.$;
		  //方法级渲染
		table.render({
		    elem: '#exportInfo'
		    ,url: commonIP + "api/pig/export/getListPage?authToken="+authToken  //数据请求路径
		    ,parseData: function(res){ //res 即为原始返回的数据
			    return {
			    	"code": res.code, //解析接口状态
      			"msg": res.msg, //解析提示文本
      			"count": res.count, //解析数据长度
			      	"data": res.errcode === '200' ? res.dataSource.list : [] //解析数据列表
			    };
  			}		 		
		    ,cellMinWidth: 80
		    ,cols: [[
		      {type:'numbers',width:'3%'}
		      ,{field:'userName', title:i18next.t("user.userName"),width:'22%'}
		      ,{field:'weight', title:i18next.t("deviceExport.pigWeightData"),width:'25%'}
		      ,{field:'createTime', title:i18next.t("deviceExport.exportTime"),width:'25%'}
		      ,{field:'remark', title:i18next.t("common.remark"),width:'25%'}
		    ]]
		    ,even: true //开启隔行背景
		    ,page: true   //开启分页
		    ,limit:20   //默认十条数据一页
		    ,limits:[10,20,30,50]  //数据分页条
		    ,id: 'testReload'
		});

		$('#search').on('click', function(){
		    active['reload'].call(this);
		});
	});
	}
</script>

</body>
</html>