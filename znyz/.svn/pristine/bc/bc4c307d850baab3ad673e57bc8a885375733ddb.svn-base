<html>

	<head>
		<title>设备监测</title>
	

	<meta name="description" content="设备监测" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<link rel="shortcut icon" href="assets/img/favicon.png" type="image/x-icon">

	<!--Basic Styles-->
	<script src="assets/js/jquery.min.js"></script>
	<link href="assets/css/bootstrap.min.css" rel="stylesheet" />
	<link id="bootstrap-rtl-link" href="#" rel="stylesheet" />
	<link href="assets/css/font-awesome.min.css" rel="stylesheet" />
	<link href="assets/css/weather-icons.min.css" rel="stylesheet" />
	<link href="assets/css/bootstrap-select/bootstrap-select.css" rel="stylesheet" />

	<!--Beyond styles-->
	<link id="beyond-link" href="assets/css/beyond.min.css" rel="stylesheet" />
	<link href="assets/css/demo.min.css" rel="stylesheet" />
	<link href="assets/css/typicons.min.css" rel="stylesheet" />
	<link href="assets/css/animate.min.css" rel="stylesheet" />
	<link id="skin-link" href="#" rel="stylesheet" type="text/css" />

	<!--Page Related styles-->
	<link href="assets/css/dataTables.bootstrap.css" rel="stylesheet" />

	<!--Skin Script: Place this script in head to load scripts for skins and rtl support-->
	<script src="assets/js/skins.min.js"></script>
	
 <link rel="stylesheet" href="TemplateData/style.css">
    <link rel="shortcut icon" href="TemplateData/favicon.ico" />
    <!--<script src="TemplateData/UnityProgress.js"></script>-->
    </head>
	<body>

		<!-- Page Body -->
		<div class="page-body">

			<div class="row">
				<div class="col-xs-12 col-md-12">
					<div class="widget">
						<div class="widget-header ">
							<span class="widget-caption"><a href="javascript:showHtml('pigFarmEnvironment.html')" data-i18n="pigFarmEnvironment.h1"></a> > <span id='fieldName'></span></span>
						</div>
						<div class="widget-body">
							<div class="table-toolbar">
								<div class="row">

									<div class="box-msg" style="display: flex;">
										<div style="margin-left:20px">
											<canvas class="emscripten" id="canvas" oncontextmenu="event.preventDefault()" height="500px" width="960px"></canvas>
											<!--<img src="photo/pigFarmPhoto.jpg" style="border: 10px solid #fff;margin-left: 4px;">-->
										</div>

										<div class="box-msg-con" style='width:500px;min-width: 500px;'>
											
												<div id='temperatureChart' style='width:250px;height:250px;float: left;margin-bottom: -40px;margin-top: -14px;'>
												</div>
												<div id='humidityChart' style='width:250px;height:250px;float: left;margin-bottom: -40px;margin-top: -14px;'>
												</div>
												<div id='ammoniaChart' style='width:250px;height:250px;float: left;'>
												</div>
												<div id='noiseChart' style='width:250px;height:250px;float: left;'>
												</div>
<!--											<a href="javascript:showHtml('indoorChart.html?name=')" style="position:relative;top:-430px;left:520px;">查看详细
											</a>-->
										</div>
										

									</div>
								</div>
							</div>
							<table class="table table-striped table-hover table-bordered" id="editabledatatable">
								<thead>
									<tr role="row" id='title'>
										<th width='20%' data-i18n="pigFarmEnvironment1.th1">  </th>
										<th width='15%' data-i18n="pigFarmEnvironment1.th2">  </th>
										<th width='10%' data-i18n="pigFarmEnvironment1.th3">  </th>
										<th width='25%' data-i18n="pigFarmEnvironment1.th4">  </th>
										<th width='15%' data-i18n="pigFarmEnvironment1.th5"> </th>
										<th data-i18n="opt">  </th>
									</tr>
									<tr role="row" id='fengsan1'>
										<th class='name' data-i18n="pigFarmEnvironment1.tr1Name">   </th>
										<th> 201-R1 </th>
										<th class='state' data-i18n="normal">  </th>
										<th class='stateInfo' data-i18n="pigFarmEnvironment1.tr1StateInfo"> </th>
										<th data-i18n="pigFarmEnvironment1.tr1Remark"> </th>
										<th> 
											<a href="#" class="btn btn-blue btn-xs stared" onclick="control(event)" data-i18n="[append]pigFarmEnvironment1.turnOff"> <i class="fa fa-2x"></i></a> 
										</th>
									</tr>
									<tr role="row" id='fengsan1'>
										<th class='name' data-i18n="pigFarmEnvironment1.tr2Name">   </th>
										<th> 201-R2 </th>
										<th class='state' data-i18n="normal">  </th>
										<th class='stateInfo' data-i18n="pigFarmEnvironment1.tr1StateInfo">  </th>
										<th data-i18n="pigFarmEnvironment1.tr2Remark"> </th>
										<th> 
											<a href="#" class="btn btn-blue btn-xs stared" onclick="control(event)" data-i18n="[append]pigFarmEnvironment1.turnOff"> <i class="fa fa-2x"></i></a> 
										</th>
									</tr>
									<tr role="row" id="shouchishebei">
										<th class='name'> AiBox </th>
										<th> 201-01 </th>
										<th class='state' data-i18n="normal">  </th>
										<th class='stateInfo'> </th>
										<th> </th>
										<th> 
											<a href="#" class="btn btn-blue btn-xs stared"  onclick="control(event)" data-i18n="[append]pigFarmEnvironment1.turnOff"> <i class="fa fa-2x"></i></a> 
										</th>
									</tr>
									<tr role="row" id='fengsan1'>
										<th class='name' data-i18n="pigFarmEnvironment1.tr3Name">  </th>
										<th> 201-01 </th>
										<th class='state' data-i18n="normal">  </th>
										<th class='stateInfo' data-i18n="pigFarmEnvironment1.tr3StateInfo"> </th>
										<th> </th>
										<th> 
											<a href="#" class="btn btn-blue btn-xs stared" onclick="control(event)" data-i18n="[append]pigFarmEnvironment1.turnOff"> <i class="fa fa-2x"></i></a> 
										</th>
									</tr>
									<tr role="row" id='fengsan1'>
										<th class='name' data-i18n="pigFarmEnvironment1.tr3Name">  </th>
										<th> 201-02 </th>
										<th class='state' data-i18n="normal">  </th>
										<th class='stateInfo' data-i18n="pigFarmEnvironment1.tr3StateInfo">  </th>
										<th> </th>
										<th> 
											<a href="#" class="btn btn-blue btn-xs stared" onclick="control(event)" data-i18n="[append]pigFarmEnvironment1.turnOff"> <i class="fa fa-2x"></i></a> 
										</th>
									</tr>
									<tr role="row" id='fengsan1'>
										<th class='name' data-i18n="pigFarmEnvironment1.tr3Name">  </th>
										<th> 201-03 </th>
										<th class='state' data-i18n="normal">  </th>
										<th class='stateInfo' data-i18n="pigFarmEnvironment1.tr3StateInfo"> </th>
										<th> </th>
										<th> 
											<a href="#" class="btn btn-blue btn-xs stared" onclick="control(event)" data-i18n="[append]pigFarmEnvironment1.turnOff"> <i class="fa fa-2x"></i></a> 
										</th>
									</tr>
									<tr role="row" id='fengsan1'>
										<th class='name' data-i18n="pigFarmEnvironment1.tr3Name">  </th>
										<th> 201-04 </th>
										<th class='state' data-i18n="normal">  </th>
										<th class='stateInfo' data-i18n="pigFarmEnvironment1.tr3StateInfo"> </th>
										<th> </th>
										<th> 
											<a href="#" class="btn btn-blue btn-xs stared" onclick="control(event)" data-i18n="[append]pigFarmEnvironment1.turnOff"> <i class="fa fa-2x"></i></a> 
										</th>
									</tr>
									<tr role="row" id='chuangkuang1'>
										<th class='name' data-i18n="pigFarmEnvironment1.tr4Name"> </th>
										<th> 201-A01 </th>
										<th class='state' data-i18n="normal">  </th>
										<th class='stateInfo' data-i18n="pigFarmEnvironment1.tr4StateInfo"> </th>
										<th> </th>
										<th> <a href="#" class="btn btn-blue btn-xs edit" onclick="control(event)" data-i18n="[append]pigFarmEnvironment1.turnOff"> <i class="fa fa-2x"></i></a>  </th>
									</tr>
									<tr role="row" id='chuangkuang1'>
										<th class='name' data-i18n="pigFarmEnvironment1.tr5Name"> </th>
										<th> 201-A02 </th>
										<th class='state' data-i18n="normal">  </th>
										<th class='stateInfo' data-i18n="pigFarmEnvironment1.tr4StateInfo"> </th>
										<th> </th>
										<th> <a href="#" class="btn btn-blue btn-xs edit" onclick="control(event)" data-i18n="[append]pigFarmEnvironment1.turnOff"> <i class="fa fa-2x"></i></a>  </th>
									</tr>
									<tr role="row" id='chuangkuang1'>
										<th class='name' data-i18n="pigFarmEnvironment1.tr6Name"> </th>
										<th> 201-A03 </th>
										<th class='state' data-i18n="normal">  </th>
										<th class='stateInfo' data-i18n="pigFarmEnvironment1.tr4StateInfo"> </th>
										<th> </th>
										<th> <a href="#" class="btn btn-blue btn-xs edit" onclick="control(event)" data-i18n="[append]pigFarmEnvironment1.turnOff"> <i class="fa fa-2x"></i></a>  </th>
									</tr>
									<tr role="row" id='chuangkuang1'>
										<th class='name' data-i18n="pigFarmEnvironment1.tr7Name"> </th>
										<th> 201-A04 </th>
										<th class='state' data-i18n="normal">  </th>
										<th class='stateInfo' data-i18n="pigFarmEnvironment1.tr4StateInfo"> </th>
										<th> </th>
										<th> <a href="#" class="btn btn-blue btn-xs edit" onclick="control(event)" data-i18n="[append]pigFarmEnvironment1.turnOff"> <i class="fa fa-2x"></i></a>  </th>
									</tr>
								</thead>

							</table>
							
								<!--<div class="row">
									<div class="col-sm-12">
										<div class="row">
											<div class="col-xs-12 col-md-12">
												<div class="buttons-preview">
												
													<a href="javascript:closeDiv()" class="btn btn-palegreen">取消</a>
												</div>
											</div>
										</div>
									</div>
								</div>-->
						</div>

					</div>
					<!-- /Page Body -->

	</body>
	<script src="echarts/echarts.js"></script>
	
	<script type="text/javascript" src="../../js/common.js" charset="utf-8"></script>
	<!-- 国际化        -->
	<script src="../../statics/plugins/i18n/i18next.min.js"></script>
	<script src="../../statics/plugins/i18n/i18nextXHRBackend.min.js"></script>
	<script src='../../statics/plugins/i18n/loc-i18next.min.js'></script>

	<script type="text/javascript">
		  var Module = {
		    TOTAL_MEMORY: 268435456,
		    errorhandler: null,			// arguments: err, url, line. This function must return 'true' if the error is handled, otherwise 'false'
		    compatibilitycheck: null,
		    dataUrl: "Release/web.data",
		    codeUrl: "Release/web.js",
		    memUrl: "Release/web.mem",
		    
		  };
  
		var humidityChart; //湿度
		var temperatureChart; //温度
		var ammoniaChart; //氨气
		var noiseChart; //声音
		humidityOption = {
			title: {
				show: false,
				text: '湿度',
				top: '85%',
				left: '40%'
			},
			tooltip: {
				formatter: "{a} <br/>{b} : {c}%"
			},
			series: [{
				name: '猪舍湿度',
				type: 'gauge',
				axisLine: { // 坐标轴圈线
					lineStyle: { // 属性lineStyle控制线条样式
						color: [
							[0.4, '#33ccff'],
							[0.8, '#1790cf'],
							[1, '#1c7099']
						],
						width: 8,
					}
				},
				axisLabel: { // 坐标轴内圈数字
					padding: -12,
				},
				axisTick: { // 坐标轴刻度
					length: 4, // 属性length控制线长
				},
				splitLine: { // 分隔线
					length: 25, // 属性length控制线长
					lineStyle: { // 属性lineStyle（详见lineStyle）控制线条样式
						width: 3,
						color: '#fff',
					}
				},

				title: {
					offsetCenter: [0, '80%'], // x, y，单位px
					textStyle: { // 其余属性默认使用全局文本样式，详见TEXTSTYLE
						fontWeight: 'bolder',
						fontSize: 18,
						color: '#191970',
					}
				},
				detail: {
					formatter: '{value}%',
					offsetCenter: [0, '50%'], // x, y，单位px
					fontSize: 20,
				},
				pointer: {
					width: 4
				},
				data: [{
					value: 50,
					name: '湿度'
				}]
			}]
		};

		temperatureOption = {
			title: {
				show: false,
				text: '温度',
			},
			tooltip: {
				formatter: "{a} <br/>{b} : {c}℃"
			},
			series: [{
				name: '猪舍温度',
				min: -30,
				max: 50,
				splitNumber: 8,
				type: 'gauge',
				axisLine: { // 坐标轴线
					lineStyle: { // 属性lineStyle控制线条样式
						width: 8,
						color: [
							[0.5, '#f16b4c'],
							[0.8, '#d8361b'],
							[1, '#99311c']
						],
					}
				},
				axisLabel: { // 坐标轴内圈数字
					padding: -12,
				},
				axisTick: { // 坐标轴刻度
					length: 4, // 属性length控制线长
				},
				splitLine: { // 分隔线
					length: 25, // 属性length控制线长
					lineStyle: { // 属性lineStyle（详见lineStyle）控制线条样式
						width: 3,
						color: '#fff',
					}
				},
				pointer: { //指针
					width: 4,
				},
				title: {
					offsetCenter: [0, '80%'], // x, y，单位px
					textStyle: { // 其余属性默认使用全局文本样式，详见TEXTSTYLE
						fontWeight: 'bolder',
						fontSize: 18,
						color: '#800000',
					}
				},
				detail: {
					formatter: '{value}℃',
					fontSize: 20,
					offsetCenter: [0, '50%'], // x, y，单位px
				},
				data: [{
					value: 20,
					name: '温度'
				}]
			}]
		};

		ammoniaOption = {
			title: {
				show: false,
				text: '氨气',
			},
			tooltip: {
				formatter: "{a} <br/>{b} : {c}ppm"
			},
			series: [{
				name: '猪舍氨气',
				type: 'gauge',
				max: 30, //舒适10以下
				axisLine: { // 坐标轴线
					lineStyle: { // 属性lineStyle控制线条样式
						width: 8,
						color: [
							[0.3, '#FFD700'],
							[1, '#FFA500'],

						],
					}
				},
				axisLabel: { // 坐标轴内圈数字
					padding: -12,
				},
				axisTick: { // 坐标轴刻度
					length: 4, // 属性length控制线长
				},
				splitLine: { // 分隔线
					length: 25, // 属性length控制线长
					lineStyle: { // 属性lineStyle（详见lineStyle）控制线条样式
						width: 3,
						color: '#fff',
					}
				},
				pointer: { //指针
					width: 4,
				},
				title: {
					offsetCenter: [0, '80%'], // x, y，单位px
					textStyle: { // 其余属性默认使用全局文本样式，详见TEXTSTYLE
						fontWeight: 'bolder',
						fontSize: 18,
						color: '#8B4513',
					}
				},
				detail: {
					formatter: '{value}ppm',
					fontSize: 20,
					offsetCenter: [0, '50%'], // x, y，单位px
				},
				data: [{
					value: 3,
					name: '氨气'
				}]
			}]
		};

		noiseOption = {
			title: {
				show: false,
				text: '声音',
			},
			tooltip: {
				formatter: "{a} <br/>{b} : {c}%"
			},
			series: [{
				name: '猪舍声音',
				type: 'gauge',
				min: 0,
				max: 120, //舒适 50 - 70
				splitNumber: 12,
				axisLine: { // 坐标轴线
					lineStyle: { // 属性lineStyle控制线条样式
						width: 8,
						color: [
							[0.42, '#86b379'],
							[0.58, '#228B22'],
							[1, '#006400']
						],
					}
				},
				axisLabel: { // 坐标轴内圈数字
					padding: -12,
				},
				axisTick: { // 坐标轴刻度
					length: 4, // 属性length控制线长
				},
				splitLine: { // 分隔线
					length: 25, // 属性length控制线长
					lineStyle: { // 属性lineStyle（详见lineStyle）控制线条样式
						width: 3,
						color: '#fff',
					}
				},
				pointer: { //指针
					width: 4,
				},
				title: {
					offsetCenter: [0, '80%'], // x, y，单位px
					textStyle: { // 其余属性默认使用全局文本样式，详见TEXTSTYLE
						fontWeight: 'bolder',
						fontSize: 18,
						color: '#006400',
					}
				},
				detail: {
					formatter: '{value}dB',
					fontSize: 20,
					offsetCenter: [0, '50%'], // x, y，单位px

				},
				data: [{
					value: 80,
					name: '声音'
				}]
			}]
		};
		
		i18n('../../locales', onLangReady) //国际化
	function onLangReady(){
		initChart()
	}
		//chart国际化
		function initChart(){
			
			humidityChart.setOption({
				series: [{
					name:i18next.t("pigFarmEnvironment1.humidityChartName"),
					data:[{
						value:50,
						name:i18next.t("pigFarmEnvironment.humidity")
						}]
					}]
				});
			temperatureChart.setOption({
				series: [{
					name:i18next.t("pigFarmEnvironment1.temperatureChartName"),
					data:[{
						value:50,
						name:i18next.t("pigFarmEnvironment.temperature")
						}]
					}]
				});
			ammoniaChart.setOption({
				series: [{
					name:i18next.t("pigFarmEnvironment1.ammoniaChartName"),
					data:[{
						value:50,
						name:i18next.t("pigFarmEnvironment.ammonia")
						}]
					}]
				});
			noiseChart.setOption({
				series: [{
					name:i18next.t("pigFarmEnvironment1.noiseChartName"),
					data:[{
						value:50,
						name:i18next.t("pigFarmEnvironment.noise")
						}]
					}]
				});
		}
		
		humidityChart = echarts.init(document.getElementById('humidityChart'));
		humidityChart.setOption(humidityOption, true);

		temperatureChart = echarts.init(document.getElementById('temperatureChart'));
		temperatureChart.setOption(temperatureOption, true);

		ammoniaChart = echarts.init(document.getElementById('ammoniaChart'));
		ammoniaChart.setOption(ammoniaOption, true);

		noiseChart = echarts.init(document.getElementById('noiseChart'));
		noiseChart.setOption(noiseOption, true);
		
		/*$(function(){
			let search = window.parent.document.getElementById("center_id").contentWindow.location.search;
			search = decodeURI(search.replace('?name=',''))
			$('#fieldName').text(search)
		})*/
		
		function OnUnityEvent(name) {
			$('#editabledatatable tr').each(function(index, target){
				if(target.id == name || target.id =='title') {
					target.className = ''
				}else{
					target.className = 'hide'
				}
			})
		}
		
		function showHtml(html) {
				location.href=html;
			
//			if(html.indexOf('name=') >= 0){
//				html += $('#fieldName').text()
//			}
//			alert(window.parent.document.getElementById("center_id"))
//			console.log(window.parent.iframeName)
//			window.parent.location.reload();  
//			window.parent.document.getElementById("center_id").setAttribute('src',html)
		}
		
		function control(e){
			
			let row 
			if(e.target.tagName === 'A'){
				row = $(e.target.parentNode.parentNode)
			}else{
				row = $(e.target.parentNode.parentNode.parentNode)
			}
			
			let res = confirm(i18next.t('pigFarmEnvironment1.confirmTxt') + e.target.innerText + " " + $(row).find('.name').text() + '?')
			
			if(res){
				switch(e.target.innerText.trim()) {
					
					case i18next.t('pigFarmEnvironment1.turnOn').trim():
						$(row).find('.state').text(i18next.t('pigFarmEnvironment1.trState'))
						switch($(row).find('.name').text()){
							case "风扇":
							case "Electric fan":
								$(row).find('.stateInfo').text(i18next.t('pigFarmEnvironment1.running'))
								break;
							case "守望者轨道巡视机器人-1":
							case "守望者轨道巡视机器人-2":
							case "The rail Robot Watchman-1":
							case "The rail Robot Watchman-2":
								$(row).find('.stateInfo').text(i18next.t('pigFarmEnvironment1.tr1StateInfo'))
								break;
							default:
								$(row).find('.stateInfo').text(i18next.t('pigFarmEnvironment1.tr4StateInfo'))
								break;
						}
						e.target.innerText = i18next.t('pigFarmEnvironment1.turnOff')
						break;
					case i18next.t('pigFarmEnvironment1.turnOff').trim():
						if(language === "en"){
							$(row).find('.state').text(i18next.t('pigFarmEnvironment1.closed'))
						}else{
							$(row).find('.state').text(i18next.t('close'))
						}
						
						$(row).find('.stateInfo').text(i18next.t('pigFarmEnvironment1.closed'))
						e.target.innerText = i18next.t('pigFarmEnvironment1.turnOn')
						break;
					case '详情':
						
				}
				
			}
		}
		
//		function closeDiv(){
//		 $(".mywindow").remove();  
//		}
		
		
	</script>
<script src="Release/UnityLoader.js"></script>
</html>